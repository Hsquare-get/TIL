# Anaconda & Virtual Environments

### (0) Anaconda

> 아나콘다는 여러가지 수학 및 과학 패키지들을 기본적으로 포함하고 있는 파이썬 배포판 이다. 때문에 **머신러닝** or **데이터 분석**을 하고자 한다면 여러가지 귀찮은 일들을 줄일 수 있게 해준다.
>
> 아나콘다를 이용하면 파이썬에서 다양한 가상환경을 손쉽게 구축할 수 있기 때문에 파이썬으로 개발 및 테스트를 진행하는데 있어서 효율을 극대화 할 수 있다.
>
> 파이썬은 많은 개발자들이 공동으로 개발하는 오픈소스 프로젝트도 많이 진행되며 라이브러리들이 매우 빈번하게 업데이트가 된다. 각각의 라이브러리들은 저마다 다양한 **의존성(Dependency)**을 가지며 규모가 큰 오픈소스의 경우 이러한 의존성이 복잡하게 얽혀있다.
>
> 때로는 라이브러리가 업데이트 될 때 구조가 크게 바뀌거나 인터페이스가 변경되는 경우도 있다. 이런 경우에 이전 버전에서는 잘 동작하던 코드가 특정 버전에서 갑자기 오류가 발생할 수 있다.
>
> 이런 이유로 인해 특정 버전을 유지하며 개발을 진행해야하는 프로젝트가 언제든지 생길 수 있기 때문에 **아나콘다로 가상 환경을 미리 구성하는 것을 권장한다.**
>
> 머신러닝 프로젝트를 진행할 때는 `Python 버전관리`와 `패키지 충돌 방지`를 위해 프로젝트 별로 각각의 `독립된 가상환경`을 만들고 이 환경에서 개발하는 것이 좋다.



### (1) 가상환경이 필요한 이유?

> **"독립적인 작업환경에서 작업할 수 있기 때문에"**
>
> 프로젝트를 진행하다보면 여러 라이브러리, 패키지를 설치해서 사용하게 된다. 그러다보면 각 라이브러리들끼리 충돌을 일으키는 문제를 발생시키는 경우가 꽤 있다. 또는, 특정 버전과 호환되는 경우가 생겨서 최신 버전과 이전 버전 중 선택해야하는 상황이 발생한다. 잘못하면 전부 삭제하고 다시 설치해야하는 경우가 생길 수도 있다.
>
> 이를 방지하기 위해서 프로젝트 단위로 가상환경을 구성하고 필요한 라이브러리르 설치해서 작업을 진행하면 훨씬 작업이 편해집니다. 또한, 다른 컴퓨터 혹은 다른 환경에서 동일 프로그램을 실행시킬 때, 작업 환경을 고정시켰기 때문에 해당 환경에 맞게 구성하면, 작업환경과 버전 문제로 실행되지 않는 문제를 방지할 수 있다.



### (2) Anaconda 기본명령어

> `conda`와 유사하게 패키지를 관리하는 도구인 `pip`이 존재
>
> - `PyPI` : 파이썬 관련 오픈소스 패키지들이 모여있는 저장소
> - `pip` : PyPI로부터 파이썬 패키지를 받아 설치하는 패키지 관리 도구
>
> `conda`와 `pip`을 **한번에 사용할 때 가상환경이 훼손**될 수 있다. 아나콘다 가상환경은 `conda`가 설치하지 않은 패키지를 제어하는 능력이 제한되어 있습니다. 즉 `pip`로 변경된 사항을 `conda`가 인식하지 못하는 경우가 발생할 수 있다. 
>
> `conda`에서 관장하고 있는 패키지를 설치하는 것은 머신러닝을 위한 가상환경을 구축하는데 안전한 방법이다. **하지만 `PyPI`에서만 사용할 수 있는 패키지들이 존재할 수 있는데 이때는 `conda` 관할의 패키지를 모두 설치 후 `pip`을 사용하는 것이 안전한 방법이다.**
>
> 즉, 아나콘다 가상환경을 구축할 때 아래와 같은 순서로 구축해야 한다.
>
> > 1. 가능한 많은 패키지를 `conda install -c [채널명] [패키지명]`으로 설치
> > 2. `conda install`로 설치가 되지 않는 패키지는 `pip install`을 사용한다

```bash
conda --version 		# 버전 확인

conda update --all 		# 아나콘다 업데이트

conda info --env 		# 현재 깔려있는 아나콘다 가상환경 확인
conda env list			# 현재 깔려있는 아나콘다 가상환경 확인

conda create -n {가상환경 이름} python=3.8 	# 가상환경 새롭게 만들기

conda env remove -n [가상환경 이름]			# 가상환경 지우기 (해당 가상환경에서 나간 후에 제거)

conda list		# 현재 가상환경의 설치된 패키지 확인

conda activate [가상환경 이름]	# 가상환경 활성화
conda deactivate				# 가상환경 비활성화

conda install [패키지 이름]		# 현재 가상환경에서 패키지 설치
conda uninstall [패키지 이름]	# 현재 가상환경에 설치된 패키지 삭제
```



### (3) Jupyter Notebook(Lab)에 가상환경 Kernel 연결

```bash
# 가상환경 활성화
conda activate [가상환경 이름]

# ipykernel 패키지 설치
conda install ipykernel

# Jupyter Notebook(Lab)애 현재 가상환경 추가
python -m ipykernel install --user --name [만들어진 가상환경 이름] --display-name [보여질 이름]
```



### (4) cmd Error

![Anaconda Error](https://user-images.githubusercontent.com/64063767/106535786-5300c500-653a-11eb-8e69-64c61dc8a219.png)

> 파이썬과 아나콘다 설치 후 명령프롬프트에서 python 버전확인시 발생하는 오류



##### 원인

> 환경 활성화(Activating environment)는 해당 환경에 잘 작동하는 소프트웨어를 만들기 위해 필수적이다. 만약 환경이 비활성화 되어있다면, 라이브러리를 찾을 수 없으며 또 다른 오류가 발생할 수 있다.
>
> 예를 들어, HTTP, SSL 에러도 OpenSSL 라이브러리를 찾지 못해서 오류가 발생하는 경우도 있다.



##### 해결방법1

`C:\Users\choi\anaconda3\Scripts\activate base`

![Anaconda Error Solution](https://user-images.githubusercontent.com/64063767/106536408-b9d2ae00-653b-11eb-8033-4d52e1afe2d1.png)



##### 해결방법2

>  **Anaconda Prompt로 JupyterLab 실행시 자동으로 아나콘다 base 환경이 활성화 되어 오류가 나지 않는다.**

